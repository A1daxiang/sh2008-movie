{"version":3,"sources":["webpack:///./src/views/City/City.vue?4c2d","webpack:///./node_modules/vant/es/utils/dom/style.js","webpack:///./node_modules/vant/es/index-bar/index.js","webpack:///./node_modules/vant/es/index-anchor/index.js","webpack:///src/views/City/City.vue","webpack:///./src/views/City/City.vue?5f84","webpack:///./src/views/City/City.vue","webpack:///./src/views/City/City.vue?8929"],"names":["_vm","this","_h","$createElement","_c","_self","staticClass","style","height","attrs","indexList","_l","item","key","index","staticStyle","sub","name","on","$event","chooseCity","staticRenderFns","isHidden","el","window","getComputedStyle","hidden","display","parentHidden","offsetParent","position","genAlphabet","charCodeOfA","charCodeAt","i","push","String","fromCharCode","_createNamespace","create","createComponent","bem","mixins","bind","scroller","$el","onScroll","props","zIndex","Number","highlightColor","sticky","type","Boolean","default","stickyOffsetTop","Array","data","activeAnchorIndex","computed","sidebarStyle","highlightStyle","color","watch","$nextTick","methods","_this","scrollTop","scrollerRect","getScrollerRect","rects","children","map","top","getElementTop","active","getActiveAnchorIndex","forEach","rect","getBoundingClientRect","left","width","Math","max","activeItemTop","ele","document","body","eleRect","length","prevHeight","reachTop","onClick","event","scrollToElement","target","onTouchMove","touchMove","direction","_event$touches$","touches","clientX","clientY","elementFromPoint","dataset","touchActiveIndex","element","match","filter","scrollIntoView","$emit","onTouchEnd","render","_this2","h","arguments","Indexes","touchStart","slots","indexKey","parent","anchorStyle","transform","mounted","offsetHeight","_ref","dataList","bs","created","eventBus","beforeDestroy","console","log","cityName","$store","commit","$router","go","updated","pullUpLoad","pullDownRefresh","click","component"],"mappings":"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","file":"js/chunk-22694092.28add2c5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"scroll\",style:({ height: _vm.height + 'px' })},[_c('div',[_c('van-index-bar',{attrs:{\"index-list\":_vm.indexList,\"highlight-color\":\"#ff0000\"}},[_c('div',[_vm._l((_vm.dataList),function(item){return [_c('van-index-anchor',{key:item.index,staticStyle:{\"background\":\"#eee\"},attrs:{\"index\":item.index}}),_vm._l((item.data),function(sub,key){return _c('van-cell',{key:key,attrs:{\"title\":sub.name},on:{\"click\":function($event){return _vm.chooseCity(sub.name)}}})})]})],2)])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export function isHidden(el) {\n  var style = window.getComputedStyle(el);\n  var hidden = style.display === 'none'; // offsetParent returns null in the following situations:\n  // 1. The element or its parent element has the display property set to none.\n  // 2. The element has the position property set to fixed\n\n  var parentHidden = el.offsetParent === null && style.position !== 'fixed';\n  return hidden || parentHidden;\n}","// Utils\nimport { createNamespace, isDef } from '../utils';\nimport { isHidden } from '../utils/dom/style';\nimport { preventDefault } from '../utils/dom/event';\nimport { getScroller, getScrollTop, getElementTop as _getElementTop, getRootScrollTop, setRootScrollTop } from '../utils/dom/scroll'; // Mixins\n\nimport { TouchMixin } from '../mixins/touch';\nimport { ParentMixin } from '../mixins/relation';\nimport { BindEventMixin } from '../mixins/bind-event';\n\nfunction genAlphabet() {\n  var indexList = [];\n  var charCodeOfA = 'A'.charCodeAt(0);\n\n  for (var i = 0; i < 26; i++) {\n    indexList.push(String.fromCharCode(charCodeOfA + i));\n  }\n\n  return indexList;\n}\n\nvar _createNamespace = createNamespace('index-bar'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nexport default createComponent({\n  mixins: [TouchMixin, ParentMixin('vanIndexBar'), BindEventMixin(function (bind) {\n    if (!this.scroller) {\n      this.scroller = getScroller(this.$el);\n    }\n\n    bind(this.scroller, 'scroll', this.onScroll);\n  })],\n  props: {\n    zIndex: [Number, String],\n    highlightColor: String,\n    sticky: {\n      type: Boolean,\n      default: true\n    },\n    stickyOffsetTop: {\n      type: Number,\n      default: 0\n    },\n    indexList: {\n      type: Array,\n      default: genAlphabet\n    }\n  },\n  data: function data() {\n    return {\n      activeAnchorIndex: null\n    };\n  },\n  computed: {\n    sidebarStyle: function sidebarStyle() {\n      if (isDef(this.zIndex)) {\n        return {\n          zIndex: this.zIndex + 1\n        };\n      }\n    },\n    highlightStyle: function highlightStyle() {\n      var highlightColor = this.highlightColor;\n\n      if (highlightColor) {\n        return {\n          color: highlightColor\n        };\n      }\n    }\n  },\n  watch: {\n    indexList: function indexList() {\n      this.$nextTick(this.onScroll);\n    }\n  },\n  methods: {\n    onScroll: function onScroll() {\n      var _this = this;\n\n      if (isHidden(this.$el)) {\n        return;\n      }\n\n      var scrollTop = getScrollTop(this.scroller);\n      var scrollerRect = this.getScrollerRect();\n      var rects = this.children.map(function (item) {\n        return {\n          height: item.height,\n          top: _this.getElementTop(item.$el, scrollerRect)\n        };\n      });\n      var active = this.getActiveAnchorIndex(scrollTop, rects);\n      this.activeAnchorIndex = this.indexList[active];\n\n      if (this.sticky) {\n        this.children.forEach(function (item, index) {\n          if (index === active || index === active - 1) {\n            var rect = item.$el.getBoundingClientRect();\n            item.left = rect.left;\n            item.width = rect.width;\n          } else {\n            item.left = null;\n            item.width = null;\n          }\n\n          if (index === active) {\n            item.active = true;\n            item.top = Math.max(_this.stickyOffsetTop, rects[index].top - scrollTop) + scrollerRect.top;\n          } else if (index === active - 1) {\n            var activeItemTop = rects[active].top - scrollTop;\n            item.active = activeItemTop > 0;\n            item.top = activeItemTop + scrollerRect.top - item.height;\n          } else {\n            item.active = false;\n          }\n        });\n      }\n    },\n    getScrollerRect: function getScrollerRect() {\n      if (this.scroller.getBoundingClientRect) {\n        return this.scroller.getBoundingClientRect();\n      }\n\n      return {\n        top: 0,\n        left: 0\n      };\n    },\n    getElementTop: function getElementTop(ele, scrollerRect) {\n      var scroller = this.scroller;\n\n      if (scroller === window || scroller === document.body) {\n        return _getElementTop(ele);\n      }\n\n      var eleRect = ele.getBoundingClientRect();\n      return eleRect.top - scrollerRect.top + getScrollTop(scroller);\n    },\n    getActiveAnchorIndex: function getActiveAnchorIndex(scrollTop, rects) {\n      for (var i = this.children.length - 1; i >= 0; i--) {\n        var prevHeight = i > 0 ? rects[i - 1].height : 0;\n        var reachTop = this.sticky ? prevHeight + this.stickyOffsetTop : 0;\n\n        if (scrollTop + reachTop >= rects[i].top) {\n          return i;\n        }\n      }\n\n      return -1;\n    },\n    onClick: function onClick(event) {\n      this.scrollToElement(event.target);\n    },\n    onTouchMove: function onTouchMove(event) {\n      this.touchMove(event);\n\n      if (this.direction === 'vertical') {\n        preventDefault(event);\n        var _event$touches$ = event.touches[0],\n            clientX = _event$touches$.clientX,\n            clientY = _event$touches$.clientY;\n        var target = document.elementFromPoint(clientX, clientY);\n\n        if (target) {\n          var index = target.dataset.index;\n          /* istanbul ignore else */\n\n          if (this.touchActiveIndex !== index) {\n            this.touchActiveIndex = index;\n            this.scrollToElement(target);\n          }\n        }\n      }\n    },\n    scrollToElement: function scrollToElement(element) {\n      var index = element.dataset.index;\n\n      if (!index) {\n        return;\n      }\n\n      var match = this.children.filter(function (item) {\n        return String(item.index) === index;\n      });\n\n      if (match[0]) {\n        match[0].scrollIntoView();\n\n        if (this.sticky && this.stickyOffsetTop) {\n          setRootScrollTop(getRootScrollTop() - this.stickyOffsetTop);\n        }\n\n        this.$emit('select', match[0].index);\n      }\n    },\n    onTouchEnd: function onTouchEnd() {\n      this.active = null;\n    }\n  },\n  render: function render() {\n    var _this2 = this;\n\n    var h = arguments[0];\n    var Indexes = this.indexList.map(function (index) {\n      var active = index === _this2.activeAnchorIndex;\n      return h(\"span\", {\n        \"class\": bem('index', {\n          active: active\n        }),\n        \"style\": active ? _this2.highlightStyle : null,\n        \"attrs\": {\n          \"data-index\": index\n        }\n      }, [index]);\n    });\n    return h(\"div\", {\n      \"class\": bem()\n    }, [h(\"div\", {\n      \"class\": bem('sidebar'),\n      \"style\": this.sidebarStyle,\n      \"on\": {\n        \"click\": this.onClick,\n        \"touchstart\": this.touchStart,\n        \"touchmove\": this.onTouchMove,\n        \"touchend\": this.onTouchEnd,\n        \"touchcancel\": this.onTouchEnd\n      }\n    }, [Indexes]), this.slots('default')]);\n  }\n});","import { createNamespace } from '../utils';\nimport { ChildrenMixin } from '../mixins/relation';\nimport { BORDER_BOTTOM } from '../utils/constant';\n\nvar _createNamespace = createNamespace('index-anchor'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nexport default createComponent({\n  mixins: [ChildrenMixin('vanIndexBar', {\n    indexKey: 'childrenIndex'\n  })],\n  props: {\n    index: [Number, String]\n  },\n  data: function data() {\n    return {\n      top: 0,\n      left: null,\n      width: null,\n      active: false\n    };\n  },\n  computed: {\n    sticky: function sticky() {\n      return this.active && this.parent.sticky;\n    },\n    anchorStyle: function anchorStyle() {\n      if (this.sticky) {\n        return {\n          zIndex: \"\" + this.parent.zIndex,\n          left: this.left ? this.left + \"px\" : null,\n          width: this.width ? this.width + \"px\" : null,\n          transform: \"translate3d(0, \" + this.top + \"px, 0)\",\n          color: this.parent.highlightColor\n        };\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.height = this.$el.offsetHeight;\n  },\n  methods: {\n    scrollIntoView: function scrollIntoView() {\n      this.$el.scrollIntoView();\n    }\n  },\n  render: function render() {\n    var _ref;\n\n    var h = arguments[0];\n    var sticky = this.sticky;\n    return h(\"div\", {\n      \"style\": {\n        height: sticky ? this.height + \"px\" : null\n      }\n    }, [h(\"div\", {\n      \"style\": this.anchorStyle,\n      \"class\": [bem({\n        sticky: sticky\n      }), (_ref = {}, _ref[BORDER_BOTTOM] = sticky, _ref)]\n    }, [this.slots('default') || this.index])]);\n  }\n});","<template>\r\n  <div  class=\"scroll\" :style=\"{ height: height + 'px' }\">\r\n    <div>\r\n    <van-index-bar :index-list=\"indexList\" highlight-color=\"#ff0000\">\r\n        <!--template 伪标签 不能加 :key=\"index\" -->\r\n      <div>\r\n        <template v-for=\"item in dataList\"> \r\n        <van-index-anchor\r\n          :index=\"item.index\"\r\n          :key=\"item.index\"\r\n          style=\"background: #eee\"\r\n        ></van-index-anchor>\r\n        <van-cell\r\n          @click=\"chooseCity(sub.name)\"\r\n          v-for=\"(sub, key) in item.data\"\r\n          :title=\"sub.name\"\r\n          :key=\"key\"\r\n        />\r\n      </template>\r\n      </div>\r\n    </van-index-bar>\r\n  </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport BScroll from \"better-scroll\";\r\nimport { cityListData } from \"@/api/api\";\r\nimport Vue from \"vue\";\r\nimport 'vant/lib/index.css';\r\nimport { IndexBar, IndexAnchor, Cell } from \"vant\";\r\nVue.use(IndexBar);\r\nVue.use(IndexAnchor);\r\nVue.use(Cell);\r\nexport default {\r\n  data() {\r\n    return {\r\n      dataList: [],\r\n      indexList: [],\r\n      bs: null,\r\n      height:0,\r\n    };\r\n  },\r\n  async mounted() {\r\n    // 获取城市的列表数据\r\n    let ret = await cityListData();\r\n    this.dataList = ret[0];\r\n    this.indexList = ret[1];\r\n    //获取可视高度\r\n    this.height = document.documentElement.clientHeight - 50;\r\n  },\r\n  created() {\r\n    //进入的时候去掉底部导航\r\n    this.eventBus.$emit(\"footernav\", false);\r\n  },\r\n  beforeDestroy() {\r\n    //出来的时候显示底部导航\r\n    this.eventBus.$emit(\"footernav\", true);\r\n  },\r\n  methods: {\r\n    // 获取选择的城市名称\r\n    chooseCity: function (cityName) {\r\n      console.log(cityName);\r\n      //将数据写到vuex中\r\n      this.$store.commit('setCity',cityName)\r\n      this.$router.go(-1)\r\n    },\r\n  },\r\n  updated() {\r\n    this.bs = new BScroll(\".scroll\", {\r\n      pullUpLoad: true,\r\n      //激活下滑的事件监听\r\n      pullDownRefresh: true,\r\n      //默认情况下使用bs后,它会禁止浏览器的点击事件\r\n      click: true,\r\n    });\r\n    this.bs.on(\"pullingUp\", () => {\r\n      //获取数据\r\n    //   this.getData();\r\n      this.bs.finishPullUp();\r\n    });\r\n    this.bs.on(\"pullingDown\", () => {\r\n      //获取数据\r\n    //   this.getData();\r\n      this.bs.finishPullDown();\r\n    });\r\n  },\r\n  \r\n};\r\n</script>\r\n\r\n<style lang=\"css\" scoped>\r\n    .scroll{\r\n      overflow: hidden;\r\n        \r\n    }\r\n\r\n    .van-index-bar{\r\n          z-index: 200;\r\n        }\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./City.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./City.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./City.vue?vue&type=template&id=610b5dd9&scoped=true&\"\nimport script from \"./City.vue?vue&type=script&lang=js&\"\nexport * from \"./City.vue?vue&type=script&lang=js&\"\nimport style0 from \"./City.vue?vue&type=style&index=0&id=610b5dd9&lang=css&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"610b5dd9\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./City.vue?vue&type=style&index=0&id=610b5dd9&lang=css&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./City.vue?vue&type=style&index=0&id=610b5dd9&lang=css&scoped=true&\""],"sourceRoot":""}